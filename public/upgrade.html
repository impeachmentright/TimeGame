<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Улучшения</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Улучшения</h1>
    <div id="upgradeOptions" class="upgrade-options"></div>
    <button onclick="goBack()">Назад</button>

    <script>
        let stars = parseInt(localStorage.getItem('stars')) || 100;
        let timeSpeed = parseFloat(localStorage.getItem('timeSpeed')) || 1;
        let elapsedDays = Math.floor((parseInt(localStorage.getItem('elapsedTime')) || 0) / (24 * 3600 * 1000));

        const upgrades = [
            { level: 1, speed: 1.1, days: 1, stars: 10 },
            { level: 2, speed: 1.2, days: 3, stars: 50 },
            { level: 3, speed: 1.4, days: 7, stars: 150 },
            { level: 4, speed: 1.6, days: 15, stars: 400 },
            { level: 5, speed: 1.8, days: 30, stars: 700 },
            { level: 6, speed: 2.0, days: 45, stars: 1200 },
            { level: 7, speed: 2.5, days: 60, stars: 2000 },
            { level: 8, speed: 3.0, days: 90, stars: 3500 }
        ];

        function displayUpgrades() {
            const container = document.getElementById('upgradeOptions');
            container.innerHTML = '';
            const currentLevel = upgrades.findIndex(u => u.speed === timeSpeed);

            upgrades.slice(currentLevel + 1).forEach(upgrade => {
                const button = document.createElement('button');
                button.textContent = `Уровень ${upgrade.level}: Скорость ${upgrade.speed}x - ${upgrade.days} дней или ${upgrade.stars} звезд`;
                button.onclick = () => buyUpgrade(upgrade);
                container.appendChild(button);
            });
        }

        function buyUpgrade(upgrade) {
            if (elapsedDays >= upgrade.days) {
                elapsedDays -= upgrade.days;
                timeSpeed = upgrade.speed;
                alert(`Улучшение куплено за внутриигровое время! Скорость времени: ${timeSpeed}x`);
            } else if (stars >= upgrade.stars) {
                stars -= upgrade.stars;
                timeSpeed = upgrade.speed;
                alert(`Улучшение куплено за звезды! Скорость времени: ${timeSpeed}x`);
            } else {
                alert("Недостаточно времени или звезд для покупки.");
                return;
            }
            localStorage.setItem('stars', stars);
            localStorage.setItem('timeSpeed', timeSpeed);
            localStorage.setItem('elapsedTime', elapsedDays * 24 * 3600 * 1000);
            displayUpgrades();
        }

        function goBack() {
            window.location.href = "index.html";
        }

        displayUpgrades();
    </script>
</body>
</html>